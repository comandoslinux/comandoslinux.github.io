

<!DOCTYPE html>
<html class="writer-html5" lang="es" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Ejecutar varios comandos en una instrucción &mdash; documentación de TerminalLinux - 0.2</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Búsqueda" href="../search.html" />
    <link rel="next" title="Ejecutar script al iniciar sesión con sudo" href="scriptinicio.html" />
    <link rel="prev" title="Reproducir música desde la terminal" href="mpv.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> TerminalLinux
          

          
            
            <img src="../_static/logo128x128.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Tabla de Contenido:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../acerca.html">Acerca de</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduccion.html">Introducción</a></li>
<li class="toctree-l1"><a class="reference internal" href="../comandos.html">Comandos</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../tutoriales.html">Lista de pequeños videotutoriales</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="formatearusbdisco.html">Formatear una usb o disco duro</a></li>
<li class="toctree-l2"><a class="reference internal" href="desactivarefimokutil.html">Desactivar/Activar sistema de arranque EFI</a></li>
<li class="toctree-l2"><a class="reference internal" href="tty.html">Resolver problemas usando la TTY</a></li>
<li class="toctree-l2"><a class="reference internal" href="mpv.html">Reproducir música desde la terminal</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Ejecutar varios comandos en una instrucción</a></li>
<li class="toctree-l2"><a class="reference internal" href="scriptinicio.html">Ejecutar script al iniciar sesión con sudo</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">TerminalLinux</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../tutoriales.html">Lista de pequeños videotutoriales</a> &raquo;</li>
        
      <li>Ejecutar varios comandos en una instrucción</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/tutoriales/varioscomandosalavez.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ejecutar-varios-comandos-en-una-instruccion">
<h1>Ejecutar varios comandos en una instrucción<a class="headerlink" href="#ejecutar-varios-comandos-en-una-instruccion" title="Enlazar permanentemente con este título">¶</a></h1>
<p>Siempre es útil saber cómo ejecutar varios comandos a la vez y, en estos ejemplos se mostrará como hacerlo. Los comandos linux son muchos y siguen apareciendo nuevos todo el tiempo, por tanto, al ejecutar y combinar a algunos de estos puede ser que tengan ciertos comportamientos inusuales al usarlos en una sola instrucción. También los comandos linux no todos son genéricos y habrá algunos que funcionen únicamente para algunas distros, para las cuales fueron desarrollados; asi que, se espera que un comando no tenga el mismo comportamiento en todas las distros existentes y por haber.</p>
<p><strong>Operadores utilizados</strong></p>
<p><strong>Punto y coma (;)</strong>, ejecutar todos los comandos en orden de izquierda a derecha sin importar si uno de ellos falla.</p>
<p><strong>Ampersand (&amp;)</strong>, un único ampersand indica al comando que se ejecute en background (en segundo plano), lo normal es que los comandos se ejecuten en primer plano (foreground).</p>
<p><strong>Ampersand (&amp;&amp;)</strong>, ejecutar los comandos en orden de izquierda a derecha si y solo si el comando anterior se ejecuta satisfactoriamente, de lo contrario la instrucción se interrumpe y ya no sigue ejecutándose.</p>
<p><strong>Pleca o barra vertical (|)</strong>, una pleca individual significa que el resultado del primer comando ejecutado servirá como parámetro para el segundo comando, por tanto, si el primer comando no devuelve resultados, entonces el segundo comando no tendrá datos para ser utilizados y no se ejecutará.</p>
<p><strong>Pleca o barra vertical (||)</strong>, ejecuta solo uno de los comandos sin importar que se escriban varios comandos, estas dobles plecas buscan que se ejecute uno u otro comando; pero nunca ambos o todos los comandos escritos en la instrucción.</p>
<p><strong>Ejemplo 1:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">-</span><span class="n">v</span> <span class="n">carpetax</span><span class="p">;</span> <span class="n">cd</span> <span class="n">carpetax</span><span class="p">;</span> <span class="n">echo</span> <span class="s2">&quot;hola mundo&quot;</span><span class="o">&gt;</span> <span class="n">hola</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>en este ejemplo creo una carpeta llamada “carpetax” (si existe dicha carpeta no la crea y pasa al siguiente comando), luego hago un “cd” a dicha carpeta para posteriormente crear un archivo llamado “hola.txt” con el contenido de “hola mundo” en él; el cual es creado en la carpeta antes creada.</p>
<img alt="../_images/muchoscomandos1.png" src="../_images/muchoscomandos1.png" />
<p>Script que realiza la misma tarea del ejemplo 1:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1"># Ejecutar varios comandos sin importar si uno falla</span>

<span class="n">mkdir</span> <span class="o">-</span><span class="n">v</span> <span class="n">carpetax</span><span class="p">;</span> <span class="n">cd</span> <span class="n">carpetax</span><span class="p">;</span> <span class="n">echo</span> <span class="s2">&quot;hola mundo&quot;</span><span class="o">&gt;</span> <span class="n">hola</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>Recordar guardar el sript en un archivo llamado “varioscomandos1.sh” y darle permisos de ejecución con “$ chmod +x varioscomandos1.sh” y luego ejecutarlo con “$ ./varioscomandos1.sh”.</p>
<p><strong>Ejemplo 2:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>mkdir -v carpetax &amp;&amp; cd carpetax &amp;&amp; today=`date +%d%m%Y%R%S%Z` &amp;&amp; echo $today &gt; $today.txt
</pre></div>
</div>
<p>este es el mismo ejemplo 1, solamente con unos cambios sutiles. Si el directorio “carpetax” existe la instrucción se detiene y ya no sigue ejecutando el siguiente comando, esa es la función del ampersand (“&amp;”) que se ejecuten los comandos si y solo si el anterior fue exitoso. La diferencia importante respecto al ejemplo 1 es que creo un archivo de texto conteniendo la fecha actual, el cual tendrá como nombre la fecha actual en el formato usado en mi país El Salvador que es: “DD-MM-AAAA:HHMMSS”; en otras palabras (Día del mes actual + mes actual + año actual + hora (formato 24 horas) + los minutos + los segundos + la zona horaria); ejemplo: “1502202110:1136CST” es la fecha actual al escribir estas líneas. No prestarle atención al comando “date”, lo escribiré en la documentación luego.</p>
<img alt="../_images/muchoscomandos2.png" src="../_images/muchoscomandos2.png" />
<p>Script que realiza la misma tarea del ejemplo 2:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#!/bin/bash

# Ejecutar varios comandos si y solo si el anterior se ejecuta con éxito

mkdir -v carpetax &amp;&amp; \
cd carpetax &amp;&amp; \
today=`date +%d%m%Y%R%S%Z` &amp;&amp; \
echo $today &gt; $today.txt
</pre></div>
</div>
<p>Recordar guardar el sript en un archivo llamado “varioscomandos2.sh” y darle permisos de ejecución con “$ chmod +x varioscomandos2.sh” y luego ejecutarlo con “$ ./varioscomandos2.sh”.</p>
<p><strong>Ejemplo 3:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">-</span><span class="n">v</span> <span class="n">carpetax</span> <span class="o">||</span> <span class="n">cd</span> <span class="n">carpetax</span>
</pre></div>
</div>
<p>en este ejemplo sino existe la “carpetax” el comando “mkdir” se ejecutará y la creará, pero si existe dicha carpeta entonces se ejecutará el comando “cd” y hará un “cd” a la carpeta en cuestión.</p>
<img alt="../_images/muchoscomandos3.png" src="../_images/muchoscomandos3.png" />
<p>Script que realiza la misma tarea del ejemplo 3:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1"># Ejecutar solo uno de los comandos que cumpla el criterio buscado</span>

<span class="n">mkdir</span> <span class="o">-</span><span class="n">v</span> <span class="n">carpetax</span> <span class="o">||</span> <span class="n">cd</span> <span class="n">carpetax</span>
</pre></div>
</div>
<p>Recordar guardar el sript en un archivo llamado “varioscomandos3.sh” y darle permisos de ejecución con “$ chmod +x varioscomandos3.sh” y luego ejecutarlo con “$ ./varioscomandos3.sh”.</p>
<p><strong>Combinación de operadores</strong></p>
<p>Para aprovechar de la mejor manera la combinación de los comandos linux en una sola instrucción habrá que utilizar y combinar los diferentes operadores arriba descritos.</p>
<p><strong>Ejemplo 4:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>mkdir -v carpetax; cd carpetax &amp;&amp; today=`date +%d%m%Y%R%S%Z` &amp;&amp; echo $today &gt; $today.txt
</pre></div>
</div>
<p>en este ejemplo me aseguro que la actividad principal (crear un archivo de texto con la fecha actual) se ejecute y no sea interrumpida por algún comando que no sea exitoso.</p>
<p>Script que realiza la misma tarea del ejemplo 4:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#!/bin/bash

# Ejecutar varios comandos

mkdir -v carpetax; cd carpetax &amp;&amp; \
today=`date +%d%m%Y%R%S%Z` &amp;&amp; \
echo $today &gt; $today.txt
</pre></div>
</div>
<p>Recordar guardar el sript en un archivo llamado “varioscomandos4.sh” y darle permisos de ejecución con “$ chmod +x varioscomandos4.sh” y luego ejecutarlo con “$ ./varioscomandos4.sh”.</p>
<p><strong>Ejemplo 5:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>mkdir -v carpetax; cd carpetax &amp;&amp; today=`date +%d%m%Y%R%S%Z` &amp;&amp; echo $today &gt; $today.txt &amp;&amp; find | sort -n &gt; todaydatefiles.txt
</pre></div>
</div>
<p>este es el mismo ejemplo 4, con la diferencia que creo otro archivo de texto que contiene todos los archivos de texto con la fecha actual antes creados y el que se acaba de crear.</p>
<p>Script que realiza la misma tarea del ejemplo 5:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#!/bin/bash

# Ejecutar varios comandos

mkdir -v carpetax; cd carpetax &amp;&amp; \
today=`date +%d%m%Y%R%S%Z` &amp;&amp; \
echo $today &gt; $today.txt &amp;&amp; find | sort -n &gt; todaydatefiles.txt
</pre></div>
</div>
<p>Recordar guardar el sript en un archivo llamado “varioscomandos5.sh” y darle permisos de ejecución con “$ chmod +x varioscomandos5.sh” y luego ejecutarlo con “$ ./varioscomandos5.sh”.</p>
<p><strong>Ejemplo 6:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>publicip=`wget -qO- http://ipecho.net/plain; echo` &amp;&amp; today=`date +%d%m%Y%R%S%Z` &amp;&amp; echo $publicip$today &gt;&gt; publicip.txt
</pre></div>
</div>
<p>en este ejemplo creo una variable temporal “publicip” que me almacena la ip pública que está usando mi computadora y le digo que la guarde en un archivo de texto; además le agrego la fecha actual en otra variable “today” y le digo que la guarde en una sola línea en un archivo de texto llamado “publicip.txt” (si existe el archivo solo insertará una línea con los datos y si no existe lo creará y le insertará los valores de las dos variables temporales).</p>
<p>Script que realiza la misma tarea del ejemplo 6:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#!/bin/bash

# Ejecutar varios comandos

publicip=`wget -qO- http://ipecho.net/plain; echo` &amp;&amp; \
today=`date +%d%m%Y%R%S%Z` &amp;&amp; \
echo $publicip$today &gt;&gt; publicip.txt
</pre></div>
</div>
<p>Recordar guardar el sript en un archivo llamado “varioscomandos6.sh” y darle permisos de ejecución con “$ chmod +x varioscomandos6.sh” y luego ejecutarlo con “$ ./varioscomandos6.sh”.</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="scriptinicio.html" class="btn btn-neutral float-right" title="Ejecutar script al iniciar sesión con sudo" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="mpv.html" class="btn btn-neutral float-left" title="Reproducir música desde la terminal" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2017 - 2021, Orlando Palencia Belloso

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-XXXXXXX-1', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>